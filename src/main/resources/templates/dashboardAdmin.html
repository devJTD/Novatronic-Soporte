<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Novatronic - Dashboard Administrativo</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <!-- CSS Personalizado -->
    <link rel="stylesheet" href="/css/nova-styles.css">
</head>

<body>
    <!-- Navbar Glassmorphism -->
    <nav class="navbar navbar-expand-lg navbar-glass fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand d-flex align-items-center" href="/admin/dashboard">
                <img src="/img/logo.png" alt="Novatronic">
                <span class="badge bg-danger ms-2">ADMIN</span>
            </a>

            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="/admin/dashboard">
                            <i class="bi bi-speedometer2"></i> Dashboard
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/admin/tickets-revisados">
                            <i class="bi bi-list-check"></i> Gestión Tickets
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/admin/reportes">
                            <i class="bi bi-graph-up"></i> Reportes
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/admin/base-conocimiento">
                            <i class="bi bi-book"></i> Base Conocimiento
                        </a>
                    </li>
                </ul>

                <div class="d-flex align-items-center">
                    <span class="text-white me-3">
                        <i class="bi bi-person-circle"></i> Admin
                    </span>
                    <a class="btn btn-sm btn-nova btn-nova-danger" href="/login">
                        <i class="bi bi-box-arrow-right"></i> Salir
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <div class="main-content">
        <!-- Header con fecha/hora -->
        <div class="flex justify-between items-center mb-8">
            <div>
                <h1 class="text-4xl font-bold text-white mb-2">
                    <i class="bi bi-grid-3x3-gap-fill"></i> Dashboard Administrativo
                </h1>
                <p class="text-glass-muted">Gestión centralizada del sistema de tickets</p>
            </div>
            <div class="text-right text-white">
                <div class="text-sm opacity-80">
                    <i class="bi bi-calendar3"></i> <span id="currentDate"></span>
                </div>
                <div class="text-lg font-semibold">
                    <i class="bi bi-clock"></i> <span id="currentTime"></span>
                </div>
            </div>
        </div>

        <!-- Alerta SLA Crítica -->
        <div class="alert-glass alert-glass-danger mb-6">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-4">
                    <i class="bi bi-exclamation-triangle-fill text-4xl"></i>
                    <div>
                        <h4 class="font-bold text-xl mb-1">Alerta SLA Crítica</h4>
                        <p class="mb-0">2 tickets están próximos a incumplir el SLA. Acción inmediata requerida.</p>
                    </div>
                </div>
                <a href="#sla-critico" class="btn btn-nova btn-nova-danger">
                    <i class="bi bi-arrow-right-circle"></i> Ver Ahora
                </a>
            </div>
        </div>

        <!-- KPIs 3D -->
        <div class="row g-4 mb-6">
            <div class="col-lg-3 col-md-6">
                <div class="kpi-card-3d">
                    <div class="flex justify-between items-start">
                        <div>
                            <div class="kpi-label mb-2">Nuevos en Espera</div>
                            <div class="kpi-number">12</div>
                            <div class="text-sm">
                                <span class="badge-modern badge-alta">
                                    <i class="bi bi-arrow-up"></i> +3 hoy
                                </span>
                            </div>
                        </div>
                        <i class="bi bi-inbox-fill kpi-icon-large"></i>
                    </div>
                </div>
            </div>

            <div class="col-lg-3 col-md-6">
                <div class="kpi-card-3d">
                    <div class="flex justify-between items-start">
                        <div>
                            <div class="kpi-label mb-2">En Proceso</div>
                            <div class="kpi-number">45</div>
                            <div class="text-sm">
                                <span class="badge-modern badge-media">
                                    <i class="bi bi-graph-up"></i> +8 vs ayer
                                </span>
                            </div>
                        </div>
                        <i class="bi bi-gear-fill kpi-icon-large"></i>
                    </div>
                </div>
            </div>

            <div class="col-lg-3 col-md-6">
                <div class="kpi-card-3d">
                    <div class="flex justify-between items-start">
                        <div>
                            <div class="kpi-label mb-2">SLA en Riesgo</div>
                            <div class="kpi-number">2</div>
                            <div class="text-sm">
                                <span class="badge-modern badge-critica">
                                    <i class="bi bi-exclamation-circle"></i> Crítico
                                </span>
                            </div>
                        </div>
                        <i class="bi bi-hourglass-split kpi-icon-large"></i>
                    </div>
                </div>
            </div>

            <div class="col-lg-3 col-md-6">
                <div class="kpi-card-3d">
                    <div class="flex justify-between items-start">
                        <div>
                            <div class="kpi-label mb-2">Cumplimiento SLA</div>
                            <div class="kpi-number">98.5%</div>
                            <div class="text-sm">
                                <span class="badge-modern" style="background: var(--gradient-success);">
                                    <i class="bi bi-check-circle"></i> Excelente
                                </span>
                            </div>
                        </div>
                        <i class="bi bi-award-fill kpi-icon-large"></i>
                    </div>
                </div>
            </div>
        </div>

        <!-- Capacidad de Grupos -->
        <div class="row g-4 mb-6">
            <div class="col-lg-8">
                <div class="card-glass">
                    <div class="card-glass-header">
                        <h3 class="text-xl font-bold mb-0">
                            <i class="bi bi-people-fill"></i> Capacidad por Grupo de Soporte
                        </h3>
                    </div>
                    <div class="card-glass-body">
                        <!-- Grupo 1 -->
                        <div class="mb-6">
                            <div class="flex justify-between mb-2">
                                <span class="font-semibold text-white">Infraestructura (DB)</span>
                                <span class="badge-modern badge-alta">85% Saturado</span>
                            </div>
                            <div class="relative h-4 bg-white bg-opacity-10 rounded-full overflow-hidden">
                                <div class="absolute h-full bg-gradient-danger rounded-full"
                                    style="width: 85%; transition: width 1s;"></div>
                            </div>
                            <div class="text-sm text-glass-muted mt-1">17 tickets / 20 máximo</div>
                        </div>

                        <!-- Grupo 2 -->
                        <div class="mb-6">
                            <div class="flex justify-between mb-2">
                                <span class="font-semibold text-white">Desarrollo (Aplicaciones)</span>
                                <span class="badge-modern badge-media">60% Capacidad</span>
                            </div>
                            <div class="relative h-4 bg-white bg-opacity-10 rounded-full overflow-hidden">
                                <div class="absolute h-full bg-gradient-info rounded-full"
                                    style="width: 60%; transition: width 1s;"></div>
                            </div>
                            <div class="text-sm text-glass-muted mt-1">18 tickets / 30 máximo</div>
                        </div>

                        <!-- Grupo 3 -->
                        <div class="mb-6">
                            <div class="flex justify-between mb-2">
                                <span class="font-semibold text-white">Soporte Nivel 1</span>
                                <span class="badge-modern" style="background: var(--gradient-success);">40%
                                    Disponible</span>
                            </div>
                            <div class="relative h-4 bg-white bg-opacity-10 rounded-full overflow-hidden">
                                <div class="absolute h-full bg-gradient-success rounded-full"
                                    style="width: 40%; transition: width 1s;"></div>
                            </div>
                            <div class="text-sm text-glass-muted mt-1">8 tickets / 20 máximo</div>
                        </div>

                        <!-- Grupo 4 -->
                        <div>
                            <div class="flex justify-between mb-2">
                                <span class="font-semibold text-white">Redes y Seguridad</span>
                                <span class="badge-modern" style="background: var(--gradient-success);">25%
                                    Capacidad</span>
                            </div>
                            <div class="relative h-4 bg-white bg-opacity-10 rounded-full overflow-hidden">
                                <div class="absolute h-full bg-gradient-success rounded-full"
                                    style="width: 25%; transition: width 1s;"></div>
                            </div>
                            <div class="text-sm text-glass-muted mt-1">5 tickets / 20 máximo</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-4">
                <div class="card-glass h-100">
                    <div class="card-glass-header">
                        <h3 class="text-xl font-bold mb-0">
                            <i class="bi bi-lightning-charge-fill"></i> Acciones Rápidas
                        </h3>
                    </div>
                    <div class="card-glass-body">
                        <div class="d-grid gap-3 mb-6">
                            <a href="/admin/registro-ticket" class="btn btn-nova btn-nova-primary">
                                <i class="bi bi-plus-circle"></i> Nuevo Ticket Manual
                            </a>
                            <a href="/admin/tickets-revisados" class="btn btn-nova btn-nova-success">
                                <i class="bi bi-list-check"></i> Ver Todos los Tickets
                            </a>
                            <a href="/admin/reportes" class="btn-nova"
                                style="background: var(--gradient-info); color: white;">
                                <i class="bi bi-graph-up"></i> Generar Reporte
                            </a>
                        </div>

                        <hr class="border-white border-opacity-20 my-4">

                        <h4 class="text-white text-sm font-bold mb-3">Tu Rendimiento Hoy</h4>
                        <div class="space-y-3">
                            <div class="flex justify-between items-center p-3 rounded-lg"
                                style="background: rgba(255,255,255,0.05);">
                                <span class="text-glass">Tickets Cerrados</span>
                                <span class="badge-modern" style="background: var(--gradient-success);">9</span>
                            </div>
                            <div class="flex justify-between items-center p-3 rounded-lg"
                                style="background: rgba(255,255,255,0.05);">
                                <span class="text-glass">Tiempo Promedio</span>
                                <span class="badge-modern badge-media">32 min</span>
                            </div>
                            <div class="flex justify-between items-center p-3 rounded-lg"
                                style="background: rgba(255,255,255,0.05);">
                                <span class="text-glass">Asignados a Ti</span>
                                <span class="badge-modern badge-alta">7</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tabla Tickets Críticos -->
        <div class="card-glass" id="sla-critico">
            <div class="card-glass-header bg-gradient-danger">
                <h3 class="text-xl font-bold mb-0">
                    <i class="bi bi-exclamation-octagon-fill"></i> Tickets con SLA en Riesgo Crítico
                </h3>
            </div>
            <div class="table-responsive">
                <table class="table table-futuristic">
                    <thead>
                        <tr>
                            <th>Ticket</th>
                            <th>Prioridad</th>
                            <th>Asunto</th>
                            <th>Cliente</th>
                            <th>Tiempo Restante</th>
                            <th>Asignado</th>
                            <th>Acción</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong class="text">NOV-3421</strong></td>
                            <td><span class="badge-modern badge-critica">CRÍTICA</span></td>
                            <td>Caída total del sistema de pagos</td>
                            <td>Banco Central</td>
                            <td class="text-danger font-bold">
                                <i class="bi bi-alarm-fill"></i> 12 min
                            </td>
                            <td>Juan Pérez</td>
                            <td>
                                <a href="/admin/detalles-ticket/NOV-3421" class="btn btn-sm btn-nova btn-nova-danger">
                                    <i class="bi bi-arrow-right"></i> Atender
                                </a>
                            </td>
                        </tr>
                        <tr>
                            <td><strong class="text">NOV-3418</strong></td>
                            <td><span class="badge-modern badge-alta">ALTA</span></td>
                            <td>Error en sincronización BD principal</td>
                            <td>Financiera Alfa</td>
                            <td class="text-warning font-bold">
                                <i class="bi bi-clock-fill"></i> 38 min
                            </td>
                            <td>Laura Gómez</td>
                            <td>
                                <a href="/admin/detalles-ticket/NOV-3418" class="btn btn-sm btn-nova"
                                    style="background: var(--gradient-warning); color: white;">
                                    <i class="bi bi-arrow-right"></i> Revisar
                                </a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // Actualizar fecha y hora
        function updateDateTime() {
            const now = new Date();
            document.getElementById('currentDate').textContent = now.toLocaleDateString('es-PE', {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            document.getElementById('currentTime').textContent = now.toLocaleTimeString('es-PE');
        }

        updateDateTime();
        setInterval(updateDateTime, 1000);

        // Animación de barras de progreso al cargar
        window.addEventListener('load', () => {
            document.querySelectorAll('.relative .absolute').forEach(bar => {
                const width = bar.style.width;
                bar.style.width = '0%';
                setTimeout(() => {
                    bar.style.width = width;
                }, 100);
            });
        });
    </script>
</body>

</html>