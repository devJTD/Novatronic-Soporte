<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Novatronic - Tickets Recibidos</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" 
          rel="stylesheet" 
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" 
          crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    
    <link rel="stylesheet" href="/css/admin-style.css"> 
    <link rel="stylesheet" href="/css/tickets-admin-style.css"> 
</head>
<body>

    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
        <div class="container-fluid">
            
            <a class="navbar-brand d-flex align-items-center" href="/admin/dashboard">
                <img src="/img/logo.png" alt="Logo Novatronic Soporte"> 
                <span class="badge bg-danger ms-2">ADMINISTRADOR</span>
            </a>
            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAdmin" 
                    aria-controls="navbarNavAdmin" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarNavAdmin">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    
                    <li class="nav-item">
                        <a class="nav-link" href="/admin/dashboard">
                            <i class="bi bi-speedometer2"></i> Dashboard
                        </a>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="/admin/tickets-nuevos">
                            <i class="bi bi-box-arrow-in-down-right"></i> Tickets Recibidos <span class="badge bg-danger ms-1">4</span>
                        </a>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link" href="/admin/tickets-revisados">
                            <i class="bi bi-card-checklist"></i> Gestión de Tickets
                        </a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="/admin/reportes">
                            <i class="bi bi-graph-up"></i> Reportes
                        </a>
                    </li>
                </ul>
            </div>
            
            <div class="d-none d-lg-block ms-auto"> 
                 <a class="btn btn-outline-light btn-logout" href="/login">
                    <i class="bi bi-box-arrow-right"></i> Cerrar Sesión
                </a>
            </div>
            
        </div>
    </nav>

    <div class="main-content container-fluid-custom">
        <h1 class="mb-4"><i class="bi bi-inbox-fill"></i> Bandeja de Tickets Recibidos <span class="badge bg-secondary ms-2">4 Pendientes</span></h1>
        
        <div class="alert alert-warning d-flex align-items-center" role="alert">
            <i class="bi bi-exclamation-triangle-fill me-2"></i>
            <div>
                **Alerta de Carga:** 4 tickets nuevos en espera. El promedio de espera de clasificación es de **25 minutos**. Priorizar la atención de estas solicitudes.
            </div>
        </div>

        <div class="card shadow">
            <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
                Tickets Pendientes de Clasificación y Asignación (IRP)
                <a href="/admin/registro-ticket" class="btn btn-outline-light btn-sm">
                    <i class="bi bi-plus-circle"></i> Registrar Ticket Manual (Requisito 1)
                </a>
            </div>
            <div class="card-body p-0">
                <div class="table-responsive">
                    <table class="table table-hover ticket-table mb-0">
                        <thead class="table-light">
                            <tr>
                                <th scope="col"># Ticket</th>
                                <th scope="col">Asunto / Descripción</th>
                                <th scope="col">Cliente/Origen</th>
                                <th scope="col">Fecha/Hora Recepción</th>
                                <th scope="col">Tiempo en Espera</th>
                                <th scope="col" class="action-col">Acción</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>NOV-1020</td>
                                <td>Error de conexión en base de datos.</td>
                                <td>Banco Central (Web/Cliente)</td>
                                <td>13/10/2025 18:45</td>
                                <td><span class="text-danger fw-bold">15 min</span></td>
                                <td>
                                    <button class="btn btn-sm btn-info" data-bs-toggle="modal" data-bs-target="#modalClasificar">
                                        <i class="bi bi-box-arrow-in-right"></i> Clasificar
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>NOV-1019</td>
                                <td>[Correo] Consulta sobre integración de reportes API v2</td>
                                <td>Novatronic Interno (Correo)</td>
                                <td>13/10/2025 17:30</td>
                                <td>1h 30 min</td>
                                <td>
                                    <button class="btn btn-sm btn-info">
                                        <i class="bi bi-box-arrow-in-right"></i> Clasificar
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>NOV-1018</td>
                                <td>Problema con la generación de PDFs en módulo A</td>
                                <td>Financiera Alfa (Manual/Call)</td>
                                <td>13/10/2025 16:10</td>
                                <td>2h 45 min</td>
                                <td>
                                    <button class="btn btn-sm btn-info">
                                        <i class="bi bi-box-arrow-in-right"></i> Clasificar
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>NOV-1017</td>
                                <td>Requerimiento de actualización de módulo B</td>
                                <td>Juan D. (Web/Cliente)</td>
                                <td>12/10/2025 09:00</td>
                                <td>>24 Horas</td>
                                <td>
                                    <button class="btn btn-sm btn-info">
                                        <i class="bi bi-box-arrow-in-right"></i> Clasificar
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="card-footer text-muted small">
                Mostrando 1 a 4 de 4 tickets pendientes. El siguiente paso es la clasificación IRP y asignación (Requisito 3).
            </div>
        </div>
        
    </div>
    
    <div class="modal fade" id="modalClasificar" tabindex="-1" aria-labelledby="modalClasificarLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header bg-info text-white">
            <h5 class="modal-title" id="modalClasificarLabel"><i class="bi bi-tag"></i> Clasificar y Asignar Ticket NOV-1020</h5>
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            
            <p class="small text-muted border-bottom pb-2">Asunto: **Error de conexión en base de datos.**</p>
            
            <form>
                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="tipo" class="form-label fw-bold">Tipo de Solicitud (IRP)</label>
                        <select id="tipo" class="form-select" required>
                            <option>Incidente</option>
                            <option>Requerimiento (Cambio)</option>
                            <option>Consulta</option>
                        </select>
                    </div>
                    <div class="col-md-6">
                        <label for="categoria" class="form-label fw-bold">Categoría / Módulo (OPD)</label>
                        <select id="categoria" class="form-select" required>
                            <option>Infraestructura (DB)</option>
                            <option>Módulo de Pagos</option>
                            <option>Módulo de Reportes</option>
                        </select>
                    </div>
                </div>
                
                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="prioridad" class="form-label fw-bold">Prioridad (IRP)</label>
                        <select id="prioridad" class="form-select" required>
                            <option selected>Crítica (SLA: 1h)</option>
                            <option>Alta (SLA: 4h)</option>
                            <option>Media (SLA: 8h)</option>
                            <option>Baja (SLA: 24h)</option>
                        </select>
                        <small class="text-danger mt-1 d-block"><i class="bi bi-clock-history"></i> **SLA Crítico detectado** (Por cliente y categoría)</small>
                    </div>
                    <div class="col-md-6">
                        <label for="cliente" class="form-label fw-bold">Cliente (SD)</label>
                        <input type="text" id="cliente" class="form-control" value="Banco Central" disabled>
                        <small class="text-primary mt-1 d-block"><i class="bi bi-shield-check"></i> SLA Base: **Cliente Tipo A (Crítico)**</small>
                    </div>
                </div>
                
                <hr>
                
                <div class="mb-3">
                    <label for="agente" class="form-label fw-bold">Asignar a Agente/Grupo</label>
                    <select id="agente" class="form-select" required>
                        <option>Grupo de Infraestructura (Asignación Sugerida)</option>
                        <option>Juan Pérez (Especialista DB)</option>
                        <option>Laura Gómez (Especialista Reportes)</option>
                    </select>
                    <small class="text-success mt-1 d-block"><i class="bi bi-lightning-fill"></i> La plataforma recomienda este grupo (Asignación Automática).</small>
                </div>
                
                <div class="mb-3">
                    <label for="comentario" class="form-label fw-bold">Comentario Interno (Opcional)</label>
                    <textarea id="comentario" class="form-control" rows="2" placeholder="Notas sobre el ticket o primer diagnóstico."></textarea>
                </div>

            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
            <button type="submit" class="btn btn-info"><i class="bi bi-check-circle-fill"></i> Clasificar y Asignar</button>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" 
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" 
            crossorigin="anonymous">
    </script>
</body>
</html>