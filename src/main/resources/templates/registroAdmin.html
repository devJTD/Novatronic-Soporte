<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Novatronic - Registro Manual Ticket</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="/css/nova-styles.css">
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-glass fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand d-flex align-items-center" href="/admin/dashboard">
                <img src="/img/logo.png" alt="Novatronic">
                <span class="badge bg-danger ms-2">ADMIN</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item"><a class="nav-link" href="/admin/dashboard"><i class="bi bi-speedometer2"></i>
                            Dashboard</a></li>
                    <li class="nav-item"><a class="nav-link" href="/admin/tickets-revisados"><i
                                class="bi bi-list-check"></i> Gesti√≥n Tickets</a></li>
                    <li class="nav-item"><a class="nav-link" href="/admin/reportes"><i class="bi bi-graph-up"></i>
                            Reportes</a></li>
                    <li class="nav-item"><a class="nav-link" href="/admin/base-conocimiento"><i class="bi bi-book"></i>
                            Base Conocimiento</a></li>
                </ul>
                <div class="d-flex align-items-center">
                    <span class="text-white me-3"><i class="bi bi-person-circle"></i> Admin</span>
                    <a class="btn btn-sm btn-nova btn-nova-danger" href="/login"><i class="bi bi-box-arrow-right"></i>
                        Salir</a>
                </div>
            </div>
        </div>
    </nav>

    <div class="main-content">
        <div class="mb-6">
            <h1 class="text-4xl font-bold text-white mb-2">
                <i class="bi bi-plus-square-fill"></i> Registro Manual de Ticket
            </h1>
            <p class="text-glass-muted">Req 1: Registro de tickets v√≠a llamada telef√≥nica o WhatsApp</p>
        </div>

        <!-- Req 1: Recepci√≥n Multicanal -->
        <div class="alert-glass alert-glass-warning mb-6">
            <div class="flex items-center gap-3">
                <i class="bi bi-info-circle-fill text-3xl"></i>
                <div>
                    <h4 class="font-bold mb-1">Registro Manual - Canales No Integrados</h4>
                    <p class="mb-0">Use este formulario para registrar tickets recibidos por tel√©fono, WhatsApp u otros
                        canales no automatizados. El sistema aplicar√° clasificaci√≥n y asignaci√≥n autom√°tica.</p>
                </div>
            </div>
        </div>

        <div class="row g-4">
            <div class="col-12">
                <form id="ticketForm" onsubmit="return procesarTicket(event)">
                    <!-- Datos del Solicitante -->
                    <div class="card-glass mb-4">
                        <div class="card-glass-header bg-gradient-primary">
                            <h3 class="text-xl font-bold mb-0">
                                <i class="bi bi-person-fill"></i> Informaci√≥n del Solicitante
                            </h3>
                        </div>
                        <div class="card-glass-body">
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label class="form-label-glass">Cliente / Empresa <span
                                            class="text-danger">*</span></label>
                                    <select class="form-glass w-full" id="cliente" required
                                        onchange="cargarContactos()">
                                        <option value="">Seleccione...</option>
                                        <option value="banco">Banco Central</option>
                                        <option value="financiera">Financiera Alfa</option>
                                        <option value="innova">Grupo Innova</option>
                                        <option value="otro">Otro (Especificar en notas)</option>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label-glass">Canal de Recepci√≥n <span
                                            class="text-danger">*</span></label>
                                    <select class="form-glass w-full" id="origen" required>
                                        <option value="telefono" selected>üìû Llamada Telef√≥nica</option>
                                        <option value="whatsapp">üí¨ WhatsApp</option>
                                        <option value="email">üìß Correo Reenviado</option>
                                        <option value="presencial">üë§ Atenci√≥n Presencial</option>
                                        <option value="otro">Otro Canal</option>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label-glass">Nombre del Contacto <span
                                            class="text-danger">*</span></label>
                                    <input type="text" class="form-glass w-full" id="contacto" required
                                        placeholder="Persona que reporta">
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label-glass">Email del Contacto</label>
                                    <input type="email" class="form-glass w-full" id="email"
                                        placeholder="Para notificaciones autom√°ticas">
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label-glass">Tel√©fono</label>
                                    <input type="tel" class="form-glass w-full" id="telefono"
                                        placeholder="+51 999 999 999">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Detalle del Ticket -->
                    <div class="card-glass mb-4">
                        <div class="card-glass-header">
                            <h3 class="text-xl font-bold mb-0">
                                <i class="bi bi-file-earmark-text"></i> Detalle del Problema/Requerimiento
                            </h3>
                        </div>
                        <div class="card-glass-body">
                            <div class="row g-3">
                                <div class="col-12">
                                    <label class="form-label-glass">Asunto / Resumen <span
                                            class="text-danger">*</span></label>
                                    <input type="text" class="form-glass w-full" id="asunto" required maxlength="150"
                                        placeholder="Resumen breve del problema">
                                </div>
                                <div class="col-12">
                                    <label class="form-label-glass">Tipo de Solicitud <span
                                            class="text-danger">*</span></label>
                                    <select class="form-glass w-full" id="tipoSolicitud" required>
                                        <option value="">Seleccione...</option>
                                        <option value="incidente">Incidente / Error</option>
                                        <option value="consulta">Consulta T√©cnica</option>
                                        <option value="requerimiento">Requerimiento de Mejora</option>
                                    </select>
                                </div>
                                <div class="col-12">
                                    <label class="form-label-glass">Descripci√≥n Completa <span
                                            class="text-danger">*</span></label>
                                    <textarea class="form-glass w-full" id="descripcion" rows="5" required
                                        minlength="30"
                                        placeholder="Describa el problema o requerimiento con el mayor detalle posible..."></textarea>

                                    <!-- Botones -->
                                    <div class="flex justify-end gap-3">
                                        <a href="/admin/dashboard" class="btn btn-nova"
                                            style="background: rgba(255,255,255,0.1); color: white;">
                                            <i class="bi bi-x-circle"></i> Cancelar
                                        </a>
                                        <button type="submit" class="btn btn-nova btn-nova-primary btn-lg">
                                            <i class="bi bi-save"></i> Crear Ticket
                                        </button>
                                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Procesar formulario
        function procesarTicket(e) {
            e.preventDefault();

            const ticketId = 'NOV-' + Math.floor(Math.random() * 9000 + 1000);
            const cliente = document.getElementById('cliente').options[document.getElementById('cliente').selectedIndex].text;
            const tipo = document.getElementById('tipoSolicitud').options[document.getElementById('tipoSolicitud').selectedIndex].text;

            alert(`‚úì Ticket creado exitosamente\n\nID: ${ticketId}\nCliente: ${cliente}\nTipo: ${tipo}\n\nEl ticket ha sido registrado correctamente.`);

            window.location.href = '/admin/detalles-ticket/' + ticketId;

            return false;
        }

        // Cargar contactos del cliente (simulado)
        function cargarContactos() {
            const cliente = document.getElementById('cliente').value;
            const contactos = {
                'banco': { nombre: 'Mar√≠a Gonz√°lez', email: 'maria.gonzalez@bancocentral.com', telefono: '+51 999-888-777' },
                'financiera': { nombre: 'Carlos Ruiz', email: 'cruiz@financiera.com', telefono: '+51 988-777-666' },
                'innova': { nombre: 'Ana Mart√≠nez', email: 'amartinez@innova.com', telefono: '+51 977-666-555' }
            };

            if (contactos[cliente]) {
                document.getElementById('contacto').value = contactos[cliente].nombre;
                document.getElementById('email').value = contactos[cliente].email;
                document.getElementById('telefono').value = contactos[cliente].telefono;
            }
        }
    </script>
</body>

</html>